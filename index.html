<!--
 * @Description: 
 * @Author: @yangwenshan
 * @since: 2021-05-27 09:03:08
 * @LastAuthor: @yangwenshan
 * @lastTime: 2021-07-23 17:29:10
-->
<html>
	<head>
		<style>
			h3 {
				position: absolute;
				top: 50%;
				left: 50%;
			}
		</style>
	</head>
	<body>
		<h3 style="text-align: center;">页面加载中...</h3>
	</body>

	<script type="text/javascript">
		function GetQueryString(name) {
			var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');
			var r = window.location.search.substr(1).match(reg);
			if (r != null) {
				return unescape(r[2]);
			}
			return null;
		}
		//获取访问路径
		const url = "http://47.106.67.59:7015/sys/url/list"
		var xhr = new XMLHttpRequest();
		xhr.open('GET', url, false);
		xhr.onreadystatechange = function() {
			// readyState == 4说明请求已完成
			if (xhr.readyState == 4) {
				if (xhr.status == 200 || xhr.status == 304) {
					let pathArray = (JSON.parse(xhr.responseText)).data
					//生成随机访问下标
					let index = Math.floor(Math.random() * pathArray.length);
					if (Array.isArray(pathArray)) {
						let path = pathArray[index]
						var query = window.location.search;

						var url = path.domainName + path.url
						if (query) {
							url = url + query + '&time=' + new Date().getTime();
						} else {
							url = url + '?time=' + new Date().getTime();
						}
						let v = GetQueryString('v')
						if (v) {
							//根据不同版本跳转	
							switch (v) {
								case "1.0":
									console.log(1)
									//pass
									break;
								case "2.0":
									console.log(2)
									//pass
									break;
								default:
									console.log(3)
									//pass
									break;
							}
						} else {
							// pass
						}
						console.log(url)
						window.location.assign(url)
					}

				}
			}
		}
		xhr.send();
	</script>
</html>
